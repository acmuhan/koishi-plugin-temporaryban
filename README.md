# koishi-plugin-temporaryban

[![npm](https://img.shields.io/npm/v/koishi-plugin-temporaryban?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-temporaryban)

ä¸€ä¸ªå¼ºå¤§çš„ Koishi è¿ç¦è¯æ£€æµ‹ä¸è‡ªåŠ¨ç¦è¨€æ’ä»¶ã€‚æ”¯æŒå¤šç§æ£€æµ‹æ–¹å¼ï¼Œå¹¶æä¾›è¯¦ç»†çš„é‚®ä»¶é€šçŸ¥åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- **å¤šé‡æ£€æµ‹æœºåˆ¶**ï¼š
  - ğŸ  **æœ¬åœ°è¯åº“**ï¼šæ”¯æŒè‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼æˆ–ç®€å•è¯åº“åŒ¹é…ã€‚
  - ğŸŒ **åœ¨çº¿ API**ï¼šé›†æˆ ApiHz æ•æ„Ÿè¯æ£€æµ‹æ¥å£ï¼Œæ”¯æŒæ™ºèƒ½è¯†åˆ«ã€‚
- **çµæ´»çš„æƒ©ç½šæœºåˆ¶**ï¼š
  - è‡ªåŠ¨æ’¤å›è¿è§„æ¶ˆæ¯ã€‚
  - ç´¯è®¡è¿è§„æ¬¡æ•°è§¦å‘ç¦è¨€ã€‚
  - å¯é…ç½®çš„æ£€æµ‹æ—¶é—´çª—å£å’Œç¦è¨€æ—¶é•¿ã€‚
- **é‚®ä»¶é€šçŸ¥**ï¼š
  - è¿è§„è§¦å‘æ—¶è‡ªåŠ¨å‘é€é‚®ä»¶ç»™ç®¡ç†å‘˜ã€‚
  - åŒ…å«è¯¦ç»†çš„è¿è§„ä¿¡æ¯ï¼ˆç”¨æˆ·ã€ç¾¤ç»„ã€è§¦å‘è¯ï¼‰ã€‚
- **ç™½åå•æ”¯æŒ**ï¼šå¯ä¸ºç‰¹å®šç”¨æˆ·è®¾ç½®ç™½åå•ï¼Œå…å—æ£€æµ‹ã€‚

## ğŸ“¦ å®‰è£…

```bash
npm install koishi-plugin-temporaryban
```

## âš™ï¸ é…ç½®é¡¹

### å…¨å±€è®¾ç½®

#### é‚®ä»¶é€šçŸ¥ (SMTP)

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- |
| `smtp.host` | string | `smtp.example.com` | SMTP æœåŠ¡å™¨åœ°å€ |
| `smtp.port` | number | `465` | SMTP ç«¯å£ (é€šå¸¸ SSL ä¸º 465) |
| `smtp.secure` | boolean | `true` | æ˜¯å¦ä½¿ç”¨ SSL/TLS |
| `smtp.user` | string | `user@example.com` | å‘ä»¶äººé‚®ç®±è´¦å· |
| `smtp.pass` | string | `password` | å‘ä»¶äººé‚®ç®±å¯†ç /æˆæƒç  |
| `smtp.senderName` | string | `Koishi Bot` | é‚®ä»¶å‘ä»¶äººåç§° |
| `smtp.senderEmail` | string | `bot@example.com` | é‚®ä»¶å‘ä»¶äººåœ°å€ |
| `smtp.receivers` | string[] | `[]` | æ¥æ”¶é€šçŸ¥çš„ç®¡ç†å‘˜é‚®ç®±åˆ—è¡¨ |

#### åœ¨çº¿ API (ApiHz)

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- |
| `api.apiUrl` | string | `https://cn.apihz.cn/api/zici/mgc.php` | æ¥å£åœ°å€ |
| `api.apiId` | string | - | ApiHz å¼€å‘è€… ID |
| `api.apiKey` | string | - | ApiHz å¼€å‘è€… Key |

### ç¾¤ç»„è®¾ç½® (Groups)

æ‚¨å¯ä»¥ä¸ºæ¯ä¸ªç¾¤ç»„å•ç‹¬é…ç½®æ£€æµ‹è§„åˆ™ã€‚

| é…ç½®é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
| --- | --- | --- | --- |
| `groupId` | string | - | **å¿…å¡«**ï¼Œéœ€è¦ç›‘æ§çš„ç¾¤å· |
| `enable` | boolean | `true` | æ˜¯å¦å¯ç”¨ç›‘æ§ |
| `detectionMethod` | `local` \| `api` | `local` | æ£€æµ‹æ–¹å¼ï¼šæœ¬åœ°è¯åº“æˆ–åœ¨çº¿ API |
| `localBadWordDict` | string | - | æœ¬åœ°è¿ç¦è¯åº“ï¼Œæ ¼å¼ï¼š`(1.è¯1)(2.è¯2)` |
| `whitelist` | object[] | `[]` | ç™½åå•ç”¨æˆ·åˆ—è¡¨ï¼ŒåŒ…å« `userId` |
| `triggerThreshold` | number | `3` | è§¦å‘ç¦è¨€çš„ç´¯è®¡è¿è§„æ¬¡æ•° |
| `triggerWindowMinutes` | number | `5` | è¿è§„è®¡æ•°çš„æ—¶é—´çª—å£ï¼ˆåˆ†é’Ÿï¼‰ |
| `muteMinutes` | number | `10` | ç¦è¨€æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ |

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

1. **é…ç½®æœ¬åœ°æ£€æµ‹**ï¼š
   åœ¨æ§åˆ¶å°ä¸­æ·»åŠ ä¸€ä¸ªç¾¤ç»„é…ç½®ï¼Œé€‰æ‹© `detectionMethod` ä¸º `local`ï¼Œå¹¶åœ¨ `localBadWordDict` ä¸­å¡«å…¥ `(1.ç¬¨è›‹)(2.å‚»ç“œ)`ã€‚

2. **é…ç½® API æ£€æµ‹**ï¼š
   åœ¨å…¨å±€é…ç½®ä¸­å¡«å…¥ ApiHz çš„ ID å’Œ Keyï¼Œç„¶ååœ¨ç¾¤ç»„é…ç½®ä¸­é€‰æ‹© `detectionMethod` ä¸º `api`ã€‚

3. **å¯ç”¨é‚®ä»¶é€šçŸ¥**ï¼š
   é…ç½®å¥½ SMTP ä¿¡æ¯ï¼Œå¹¶æ·»åŠ ç®¡ç†å‘˜é‚®ç®±åˆ° `receivers` åˆ—è¡¨ã€‚ä¸€æ—¦æœ‰ç”¨æˆ·è§¦å‘è¿ç¦è¯ï¼Œæ‚¨å°†æ”¶åˆ°åŒ…å«è¯¦ç»†ä¿¡æ¯çš„é‚®ä»¶ã€‚

## ğŸ“ License

MIT
